<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>DMScreen: Level {{ lvid }} - floor {{ floorid }}</title>
        <link rel="stylesheet" href="/static/style.css">
        <link rel="stylesheet" href="/static/table_style.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.9.0/d3.min.js"></script>
        <script src="/static/svg_view.js?ver=0.1.6"></script>
        <script src="/static/level_editor.js?ver=0.1.7"></script>
    </head>
    <body class="container" data-dungeon="{{ dungen_name }}" data-bookurl="{{ book_url }}">
        <div class="container stretch cols">
            <div class="buttons container">
                <div class="checkboxes">
                    <label>
                        <input type="checkbox" id="show_monsters_btn" />
                        Show monsters
                    </label>
                    <label>
                        <input type="checkbox" id="show_traps_btn">
                        Show traps
                    </label>
                    <label>
                        <input type="checkbox" id="show_shops_btn">
                        Show shops
                    </label>
                    <label>
                        <input type="checkbox" id="show_treasure_btn">
                        Show treasure
                    </label>
                    <label>
                        <input type="checkbox" id="show_stairs_up">
                        Show stairs up
                    </label>
                    <label>
                        <input type="checkbox" id="show_stairs_down">
                        Show stairs down
                    </label>
                </div>
                <select id="mode_select"></select>
                <a id="zoom_to_fit_btn">Zoom to fit</a>
                {% if floorid > 1 %}
                <a href="/{{ dungen_name }}/level/{{ lvid }}/{{ floorid - 1 }}">Floor up</a>
                {% endif %}
                {% if floorid + 1 <= floors %}
                <a href="/{{ dungen_name }}/level/{{ lvid }}/{{ floorid + 1 }}">Floor down</a>
                {% endif %}
                <a target="blank" id="view_map_btn">Map view</a>
                <a href="/{{ dungen_name }}/export/{{ lvid }}/{{ floorid }}" target="blank" id="export_map_btn">Export as map</a>
                <a class="success" id="save_btn">Save</a>
            </div>
            <div class="container stretch">
                <div class="map"
                    data-scale="{{ scale }}"
                    data-lvid="{{ lvid }}"
                    data-floorid="{{ floorid }}"
                >
                    {{ img | safe }}
                </div>
                <div class="notes cols">
                    <div id="notes-mode">
                        <div id="room_info"></div>
                        <div id="room_attrs">
                            <h3>Room attributes</h3>
                            <form></form>
                        </div>
                        <div id="encounter">
                            <h3>Encounter items</h3>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Initiative</th>
                                        <th>HP</th>
                                        <th>XP</th>
                                        <th>Book</th>
                                        <th>Page</th>
                                        <th>Remove</th>
                                    </tr>
                                </thead>
                                <tbody id="encounter_items"></tbody>
                            </table>
                            <a href="#" id="encounter_link" target="_blank">
                                Go to encounter
                            </a>
                            <h3>Add item</h3>
                            <form class="encounter_item">
                                <label>
                                    Name <input type="text" name="name" />
                                </label>
                                <label>
                                    Initiative <input type="number" name="initiative" />
                                </label>
                                <label>
                                    HP <input type="number" name="hp" />
                                </label>
                                <label>
                                    XP <input type="number" name="xp" />
                                </label>
                                <label>
                                    Book <input type="text" name="book" />
                                </label>
                                <label>
                                    Page <input type="number" name="book_page" />
                                </label>
                                <input type="submit" value="Add Enemy"/>
                            </form>
                        </div>
                    </div>
                    <div id="stamp-mode">
                        <input type="text" placeholder="search for stamp" />
                        <input type="button" value="Stamps in floor" />
                        <div id="stamp-list">
                        </div>
                    </div>
                    <div id="water-mode">
                        <h3>Water mask options:</h3>
                        <label>
                            Size:
                            <br/>
                            <input id="water-el-width" type="range" min="1" max="8" value="1" step="0.25"/>
                        </label>
                        <label>
                            Add:
                            <input type="radio" name="mode" value="add" checked />
                        </label>
                        <label>
                            Subtract:
                            <input type="radio" name="mode" value="remove" />
                        </label>
                    </div>
                    <div id="stamp-spray-mode">
                        <h3>Stamp spray options:</h3>
                        <label>
                            Selected stamp:
                            <br/>
                            <input type="text" disabled="true" id="stamp-spray-stamp-label"/>
                        </label>
                            Size:
                            <br/>
                            <input id="stamp-spray-el-width" type="range" min="1" max="50" value="5" step="1"/>
                        </label>
                        <label>
                            Stamp density:
                            <br/>
                            <input id="stamp-spray-el-density" type="range" min="0.025" max="1" value="0.1" step="0.025"/>
                        </label>
                        <label>
                            <input id="stamp-spray-undo" type="button" disabled="true" value="Undo" />
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
